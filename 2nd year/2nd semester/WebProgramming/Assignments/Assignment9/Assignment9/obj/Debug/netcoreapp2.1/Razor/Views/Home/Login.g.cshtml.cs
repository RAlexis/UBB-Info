#pragma checksum "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "398456c1386547c76b1e3d900632d3413c4ec64f"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Login), @"mvc.1.0.view", @"/Views/Home/Login.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Login.cshtml", typeof(AspNetCore.Views_Home_Login))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\_ViewImports.cshtml"
using Assignment9;

#line default
#line hidden
#line 1 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
using Assignment9.Models;

#line default
#line hidden
#line 104 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
using MySql.Data.MySqlClient;

#line default
#line hidden
#line 177 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
using Assignment9.Controllers;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"398456c1386547c76b1e3d900632d3413c4ec64f", @"/Views/Home/Login.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"86bddc6c449716a90c3bc8a8a19443c8da3c5286", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Login : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<SubmitGBEntryModel>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(27, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 4 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
  
    ViewData["Title"] = "Logged in";

#line default
#line hidden
            BeginContext(101, 39, true);
            WriteLiteral("\r\n<h2>Submit a guestbook entry</h2>\r\n\r\n");
            EndContext();
#line 10 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
 using (Html.BeginForm("SubmitGBEntry", "Home", FormMethod.Post, new { id = "SubmitGBEntry", @class = "enter_form" }))
{

#line default
#line hidden
            BeginContext(263, 40, true);
            WriteLiteral("    <fieldset>\r\n        Title:\r\n        ");
            EndContext();
            BeginContext(304, 37, false);
#line 14 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
   Write(Html.TextBoxFor(model => model.Title));

#line default
#line hidden
            EndContext();
            BeginContext(341, 10, true);
            WriteLiteral("\r\n        ");
            EndContext();
            BeginContext(352, 47, false);
#line 15 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
   Write(Html.ValidationMessageFor(model => model.Title));

#line default
#line hidden
            EndContext();
            BeginContext(399, 27, true);
            WriteLiteral("\r\n\r\n        Text:\r\n        ");
            EndContext();
            BeginContext(427, 36, false);
#line 18 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
   Write(Html.TextBoxFor(model => model.Text));

#line default
#line hidden
            EndContext();
            BeginContext(463, 10, true);
            WriteLiteral("\r\n        ");
            EndContext();
            BeginContext(474, 46, false);
#line 19 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
   Write(Html.ValidationMessageFor(model => model.Text));

#line default
#line hidden
            EndContext();
            BeginContext(520, 72, true);
            WriteLiteral("\r\n\r\n        <input type=\"submit\" value=\"Add entry\" />\r\n    </fieldset>\r\n");
            EndContext();
#line 23 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
}

#line default
#line hidden
            BeginContext(595, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 27 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                                   

    if (HomeController.username == "admin")
    {

#line default
#line hidden
            BeginContext(728, 14, true);
            WriteLiteral("        <br>\r\n");
            EndContext();
#line 32 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"

        string connstring2 = string.Format("Server=localhost; database=weblab7; UID=root; password=root1234");
        var connection2 = new MySqlConnection(connstring2);
        connection2.Open();

        string result = "<select id=\"filterSelect\" name=\"filterSelect\">";

        string query2 = "SELECT DISTINCT author_email FROM guestbook";
        var cmd2 = new MySqlCommand(query2, connection2);
        var reader2 = cmd2.ExecuteReader();
        while (reader2.Read())
        {
            string username2 = reader2.GetString(0);
            result += "<option>" + username2 + "</option>";
        }

        connection2.Close();
        result += "</select>";

        

#line default
#line hidden
#line 51 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
         using (Html.BeginForm("ApplyFilter", "Home", FormMethod.Post, new { id = "applyfilter", @class = "applyfilter_form" }))
        {
            

#line default
#line hidden
            BeginContext(1594, 16, false);
#line 53 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
       Write(Html.Raw(result));

#line default
#line hidden
            EndContext();
#line 53 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                             ;

#line default
#line hidden
            BeginContext(1613, 58, true);
            WriteLiteral("            <input type=\"submit\" value=\"Apply filter\" />\r\n");
            EndContext();
#line 55 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
        }

#line default
#line hidden
            BeginContext(1684, 32, true);
            WriteLiteral("        <br />\r\n        <br />\r\n");
            EndContext();
#line 59 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
    }

#line default
#line hidden
            BeginContext(1726, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 63 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                                   
    if (HomeController.username == "admin")
    {

#line default
#line hidden
            BeginContext(1821, 39, true);
            WriteLiteral("        <div id=\"update-gbentry-div\">\r\n");
            EndContext();
#line 67 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
             using (Html.BeginForm("Update", "Home", FormMethod.Post, new { id = "update", @class = "update_form" }))
            {

#line default
#line hidden
            BeginContext(1994, 48, true);
            WriteLiteral("                <fieldset>\r\n                    ");
            EndContext();
            BeginContext(2043, 97, false);
#line 70 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.TextBoxFor(model => model.Id, new { id = "id-input", placeholder = "ID", @readonly = true }));

#line default
#line hidden
            EndContext();
            BeginContext(2140, 23, true);
            WriteLiteral(";\r\n                    ");
            EndContext();
            BeginContext(2164, 44, false);
#line 71 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.ValidationMessageFor(model => model.Id));

#line default
#line hidden
            EndContext();
            BeginContext(2208, 25, true);
            WriteLiteral(";\r\n\r\n                    ");
            EndContext();
            BeginContext(2234, 88, false);
#line 73 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.TextBoxFor(model => model.Email, new { id = "email-input", placeholder = "Email" }));

#line default
#line hidden
            EndContext();
            BeginContext(2322, 22, true);
            WriteLiteral("\r\n                    ");
            EndContext();
            BeginContext(2345, 47, false);
#line 74 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.ValidationMessageFor(model => model.Email));

#line default
#line hidden
            EndContext();
            BeginContext(2392, 25, true);
            WriteLiteral(";\r\n\r\n                    ");
            EndContext();
            BeginContext(2418, 91, false);
#line 76 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.TextBoxFor(model => model.TitleUpd, new { id = "title-input", placeholder = "Title" }));

#line default
#line hidden
            EndContext();
            BeginContext(2509, 22, true);
            WriteLiteral("\r\n                    ");
            EndContext();
            BeginContext(2532, 50, false);
#line 77 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.ValidationMessageFor(model => model.TitleUpd));

#line default
#line hidden
            EndContext();
            BeginContext(2582, 25, true);
            WriteLiteral(";\r\n\r\n                    ");
            EndContext();
            BeginContext(2608, 94, false);
#line 79 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.TextBoxFor(model => model.Comment, new { id = "comment-input", placeholder = "Comment" }));

#line default
#line hidden
            EndContext();
            BeginContext(2702, 22, true);
            WriteLiteral("\r\n                    ");
            EndContext();
            BeginContext(2725, 49, false);
#line 80 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
               Write(Html.ValidationMessageFor(model => model.Comment));

#line default
#line hidden
            EndContext();
            BeginContext(2774, 94, true);
            WriteLiteral(";\r\n\r\n                    <input type=\"submit\" value=\"Update\" />\r\n                </fieldset>\r\n");
            EndContext();
#line 84 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
            }

#line default
#line hidden
            BeginContext(2883, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 86 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
             using (Html.BeginForm("Delete", "Home", FormMethod.Post, new { id = "delete", @class = "delete_form" }))
            {
                

#line default
#line hidden
            BeginContext(3036, 123, false);
#line 88 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
           Write(Html.TextBoxFor(model => model.Id, new { id = "id-input2", placeholder = "ID", @readonly = true, style = "display: none" }));

#line default
#line hidden
            EndContext();
#line 88 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                                                                                                                                            ;
                

#line default
#line hidden
            BeginContext(3179, 44, false);
#line 89 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
           Write(Html.ValidationMessageFor(model => model.Id));

#line default
#line hidden
            EndContext();
#line 89 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                                                             ;

#line default
#line hidden
            BeginContext(3226, 56, true);
            WriteLiteral("                <input type=\"submit\" value=\"Delete\" />\r\n");
            EndContext();
#line 91 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
            }

#line default
#line hidden
            BeginContext(3297, 20, true);
            WriteLiteral("\r\n\r\n        </div>\r\n");
            EndContext();
#line 95 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"

    }


#line default
#line hidden
            BeginContext(3331, 36, true);
            WriteLiteral("\r\n<br>\r\n<h2>Current entries</h2>\r\n\r\n");
            EndContext();
#line 104 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                                  

    string connstring = string.Format("Server=localhost; database=weblab7; UID=root; password=root1234");
    var connection = new MySqlConnection(connstring);
    connection.Open();

    string query = "SELECT * FROM guestbook";
    var cmd = new MySqlCommand(query, connection);
    var reader = cmd.ExecuteReader();

    string tableHTML = "<table id=\"gbentries-table\" border = \"1\"><tr><th>ID</th><th>Author's Email</th><th>Title</th><th>Description</th><th>Posted on</th></tr>";

    while (reader.Read())
    {
        int id = reader.GetInt32(0);
        string username = reader.GetString(1);
        string title = reader.GetString(2);
        string desc = reader.GetString(3);
        tableHTML += "<tr>";
        tableHTML += "<td>" + id + "</td>";
        tableHTML += "<td>" + username + "</td>";
        tableHTML += "<td>" + title + "</td>";
        tableHTML += "<td>" + desc + "</td>";
        // Date and time are split by space, we only need the date
        tableHTML += "<td>" + reader.GetDateTime(4).ToString().Split(' ')[0] + "</td>";
    }

    tableHTML += "</table>";

    connection.Close();

#line default
#line hidden
            BeginContext(4563, 4, true);
            WriteLiteral("\r\n\r\n");
            EndContext();
            BeginContext(4568, 19, false);
#line 137 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
Write(Html.Raw(tableHTML));

#line default
#line hidden
            EndContext();
            BeginContext(4587, 4, true);
            WriteLiteral("\r\n\r\n");
            EndContext();
#line 140 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                                   
    if (HomeController.username == "admin")
    {

#line default
#line hidden
            BeginContext(4684, 1266, true);
            WriteLiteral(@"        <script>
            var table = document.getElementById(""gbentries-table"");
            var rows = table.getElementsByTagName(""tr"");
            for (i = 1; i < rows.length; i++) {
                var row = table.rows[i];
                row.onclick = function (myrow) {
                    return function () {
                        var cell = myrow.getElementsByTagName(""td"")[0];
                        var id = cell.innerHTML;
                        //alert(""stuff: ""+ myrow.getElementsByTagName(""td"")[1].innerHTML);
                        //alert(""id:"" + id);

                        document.getElementById(""id-input"").value = myrow.getElementsByTagName(""td"")[0].innerHTML;
                        document.getElementById(""id-input2"").value = myrow.getElementsByTagName(""td"")[0].innerHTML;
                        document.getElementById(""email-input"").value = myrow.getElementsByTagName(""td"")[1].innerHTML;
                        document.getElementById(""title-input"").value = myrow.getE");
            WriteLiteral("lementsByTagName(\"td\")[2].innerHTML;\r\n                        document.getElementById(\"comment-input\").value = myrow.getElementsByTagName(\"td\")[3].innerHTML;\r\n                    };\r\n                }(row);\r\n            }\r\n        </script>\r\n");
            EndContext();
            BeginContext(5952, 58, true);
            WriteLiteral("        <script>\r\n            function clickedUpdate() {\r\n");
            EndContext();
            BeginContext(6104, 127, true);
            WriteLiteral("\r\n                var id = document.getElementById(\"id-input\").value\r\n            }\r\n\r\n            function clickedDelete() {\r\n");
            EndContext();
#line 177 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
                                                   

                    //HomeController.Delete()
                

#line default
#line hidden
            BeginContext(6372, 34, true);
            WriteLiteral("            }\r\n        </script>\r\n");
            EndContext();
#line 183 "C:\Users\necso\source\repos\Assignment9\Assignment9\Views\Home\Login.cshtml"
    }

#line default
#line hidden
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<SubmitGBEntryModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
